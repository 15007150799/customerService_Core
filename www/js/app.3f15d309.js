(function(e){function t(t){for(var o,a,u=t[0],c=t[1],i=t[2],m=0,l=[];m<u.length;m++)a=u[m],n[a]&&l.push(n[a][0]),n[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(l.length)l.shift()();return s.push.apply(s,i||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],o=!0,a=1;a<r.length;a++){var u=r[a];0!==n[u]&&(o=!1)}o&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var o={},a={app:0},n={app:0},s=[];function u(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-6d16f8e3":"a3e75a30","chunk-99df09e0":"5b9e7076"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r={"chunk-6d16f8e3":1,"chunk-99df09e0":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise(function(t,r){for(var o="css/"+({}[e]||e)+"."+{"chunk-6d16f8e3":"79c88a0d","chunk-99df09e0":"2d637cce"}[e]+".css",n=c.p+o,s=document.getElementsByTagName("link"),u=0;u<s.length;u++){var i=s[u],m=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(m===o||m===n))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){i=l[u],m=i.getAttribute("data-href");if(m===o||m===n)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var o=t&&t.target&&t.target.src||n,s=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");s.request=o,delete a[e],d.parentNode.removeChild(d),r(s)},d.href=n;var f=document.getElementsByTagName("head")[0];f.appendChild(d)}).then(function(){a[e]=0}));var o=n[e];if(0!==o)if(o)t.push(o[2]);else{var s=new Promise(function(t,r){o=n[e]=[t,r]});t.push(o[2]=s);var i,m=document.createElement("script");m.charset="utf-8",m.timeout=120,c.nc&&m.setAttribute("nonce",c.nc),m.src=u(e),i=function(t){m.onerror=m.onload=null,clearTimeout(l);var r=n[e];if(0!==r){if(r){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+o+": "+a+")");s.type=o,s.request=a,r[1](s)}n[e]=void 0}};var l=setTimeout(function(){i({type:"timeout",target:m})},12e4);m.onerror=m.onload=i,document.head.appendChild(m)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(r,o,function(t){return e[t]}.bind(null,o));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/www/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],m=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=m;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"01ff":function(e,t,r){},"034f":function(e,t,r){"use strict";var o=r("64a9"),a=r.n(o);a.a},"56d7":function(e,t,r){"use strict";r.r(t);var o=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("transition",{attrs:{name:"fade",appear:""}},[r("router-view")],1)],1)},n=[],s=(r("034f"),r("2877")),u={},c=Object(s["a"])(u,a,n,!1,null,null,null),i=c.exports,m=r("8c4f");o["default"].use(m["a"]);const l=new m["a"]({mode:"hash",base:"/www/",routes:[{path:"/",redirect:{name:"login"}},{name:"login",path:"/login",meta:{auth:!1,title:"登录"},component:function(){return r.e("chunk-99df09e0").then(r.bind(null,"a55b"))}},{name:"home",path:"/home",meta:{auth:!0,title:"聊天面板"},component:function(){return r.e("chunk-6d16f8e3").then(r.bind(null,"bb51"))}}]});l.beforeEach((e,t,r)=>{e.matched.some(e=>e.meta.auth)?window.$cookies.isKey("token")?r():r({name:"login",query:{redirect:e.fullPath}}):r()}),l.afterEach(e=>{e.meta.title&&(document.title="金色世纪在线客服 - "+e.meta.title)});var d=l,f=r("2f62"),p=r("5c96"),g=r.n(p);o["default"].use(f["a"]);var h=new f["a"].Store({state:{currentCustomer:{customer_id:"",customer_nick_name:"",customer_head_img_url:""},currentRoomMessages:[{id:"",kf_id:"",type:"",media_url:"",msg:"",ai_msg:"",ack:!1,oper_code:0,create_time:""}],roomData:[{room_customer:{customer_id:"",customer_nick_name:"",customer_head_img_url:""},room_messages:[{id:"",kf_id:"",type:"",media_url:"",msg:"",ai_msg:"",ack:!1,oper_code:0,create_time:""}]}],waitData:[{room_customer:{customer_id:"",customer_nick_name:"",customer_head_img_url:""},room_messages:[{id:"",kf_id:"",type:"",media_url:"",msg:"",ai_msg:"",ack:!1,oper_code:0,create_time:""}]}],wSocket:null},mutations:{setCurrentCustomer(e,t){e.currentCustomer=t;for(let r=0;r<e.roomData.length;r++)if(t.customer_id===e.roomData[r].room_customer.customer_id)return void(e.currentRoomMessages=e.roomData[r].room_messages)},setRoomData(e,t){e.roomData=t},setWaitData(e,t){e.waitData=t},updateRoomData(e,t){let r=!1;for(let o=0;o<e.roomData.length;o++)t.room_customer.customer_id===e.roomData[o].room_customer.customer_id&&(e.roomData[o]=t,r=!0);r||(e.roomData=[t].concat(e.roomData),p["Notification"].warning({title:"新客户接入",message:"聊天列表加入一位新客户，请注意查看"})),t.room_customer.customer_id===e.currentCustomer.customer_id&&(e.currentRoomMessages=t.room_messages),e.roomData=[].concat(e.roomData)},updateWaitData(e,t){e.waitData.forEach(e=>{t.room_customer.customer_id===e.room_customer.customer_id&&(e=t)})},cleanWaitData(e,t){e.waitData=t?e.waitData.filter(e=>!t.includes(e.room_customer.customer_id)):[]},cleanCurrentCustomer(e){e.currentCustomer={},e.currentRoomMessages=[]},setWaitAck(e,t){e.roomData.forEach(e=>{e.room_customer.customer_id===t&&(e.room_messages[e.room_messages.length-1].ack=!0)})},transferRoom(e,t){for(let r=0;r<e.roomData.length;r++)if(e.roomData[r].room_customer.customer_id===t)return void e.roomData.splice(r,1)},initwSocket(e,t){t&&(e.wSocket=t)},cleanwSocket(e){e.wSocket&&e.wSocket.readyState<=1&&(e.wSocket.onclose=function(e){},e.wSocket.close()),e.wSocket=null}},actions:{}}),_=(r("01ff"),r("0fae"),r("2b27")),k=r.n(_),w=r("bc3a"),b=r.n(w);const v="172.16.2.163:20700",y="http://"+v,D="ws://"+v,S=b.a.create({baseURL:y,timeout:5e3});S.apiHost=y,S.wsHost=D,S.interceptors.request.use(e=>{return window.$cookies.isKey("token")&&(e.headers["Authentication"]=window.$cookies.get("token")),e},e=>{return Promise.reject(err)}),S.interceptors.response.use(e=>{return e},e=>{if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录";break;case 403:e.message="拒绝访问";break;case 404:e.message=`请求地址出错: ${e.response.config.url}`;break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持";break;default:break}return p["Notification"].warning({title:"服务器接口异常",message:`${e}`}),401===e.response.status&&(window.$cookies.remove("token"),window.location.reload()),Promise.reject(e)});var j=S,P=r("a7fe"),C=r.n(P);o["default"].use(g.a),o["default"].use(k.a),o["default"].use(C.a,j),o["default"].config.productionTip=!1,new o["default"]({router:d,store:h,render:function(e){return e(i)}}).$mount("#app")},"64a9":function(e,t,r){}});
//# sourceMappingURL=app.3f15d309.js.map